---
path: git-commands-to-note
date: 2021-04-15T15:08:45.013Z
title: Git commands to note
description: Some useful git commands, save for later
---
![](data:image/png;base64,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)

#### Undo git reset

```
$ git reset 'HEAD@{1}'
```

#### Stash only necessary files

1. Stage all your files you need to stash
2. This command will create a stash with ALL of your changes (staged and unstaged), but will leave the staged changes in your working directory (still in state staged):

```
$ git stash --keep-index
```

3. Run git stash save "good stash", now your "good stash" has ONLY staged files.

#### Rename Case sensitive: from casesensitive to CaseSensitive, two steps:

```
$ git mv casesensitive tmp
$ git mv tmp CaseSensitive
```

#### Remove untracked files, include `.gitignore` files:

```
$ git clean -X -dn // to check all files will be removed
$ git clean -X -fd // to confirm action
```

#### SSH: Add multiple ssh keys

ref: https://docs.gitlab.com/ee/ssh/#configure-ssh-to-point-to-a-different-directory

#### SSH: Avoid enter passphrase every time

ref: https://stackoverflow.com/a/41145954/10649754

Configuration `~/.ssh/config`

```
Host *
  UseKeychain yes
  AddKeysToAgent yes
  IdentityFile ~/.ssh/id_rsa
```

#### Change commit author

```
$ git config --global user.name "John Doe"
$ git config --global user.email "john@doe.org"
```

#### Assume unchanged:

```
$ git update-index --assume-unchanged [file_paths]
```

#### Undo assume unchanged:

```
$ git update-index --no-assume-unchanged [file_paths]
```

#### List all assume unchanged files:

```
$ git ls-files -v | grep "^[a-z]"
```

#### Completely remote a file from history

```
$ git filter-branch --index-filter \
  'git rm --cached --ignore-unmatch path/to/mylarge_50mb_file' \
  --tag-name-filter cat -- --all
```

#### Recover files from deleted/popped stashes:

ref: https://dev.to/meduzen/recover-a-lost-git-stash-in-two-steps-569

1. List lost stashes

```
$ git fsck --unreachable | grep commit | cut -d ' ' -f3 | xargs git log --merges --no-walk
```

2. Send a lost stash back where it comes from

```
$ git update-ref refs/stash 4b3fc45c94caadcc87d783064624585c194f4be8 -m "My recovered stash"
```

#### Clean up git

```
$ git gc --prune=now --aggressive
```

#### Apply .gitignore

```
$ git rm -r --cached .
$ git add .
$ git commit -m "Untrack files in .gitignore"
```

#### Remove tags

1. At local

```
$ git tag -d [tagname]
```

2. At remote

```
$ git push --delete origin [tagname]
```